# .pre-commit-config.yaml

repos:
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v6.0.0
  hooks:
  -   id: trailing-whitespace
  -   id: end-of-file-fixer
  -   id: check-yaml
  -   id: check-added-large-files

- repo: local
  hooks:
  # - id: pants-fmt
  #   name: pants-fmt
  #   entry: pants fmt
  #   language: system
  #   stages: [pre-commit]
  #   pass_filenames: false
  #   files: \.(py)$
  #   exclude: ^templates/

  - id: pants-lint
    name: pants-lint
    entry: pants lint
    language: system
    stages: [pre-commit]
    pass_filenames: false
    files: \.(py)$
    exclude: ^templates/

  - id: terraform-test
    name: terraform-test
    entry: bash -c 'cd "$(dirname "$0")/.." && terraform init -backend=false && terraform test'
    language: system
    stages: [pre-commit]
    pass_filenames: true
    files: \.tftest\.hcl$

- repo: https://github.com/antonbabenko/pre-commit-terraform
  rev: v1.100.0
  hooks:
     - id: terraform_fmt
     - id: terraform_validate
     - id: terraform_tflint
       args:
        - '--args=--config=__GIT_WORKING_DIR__/.tflint.hcl'
     - id: terraform_docs
       args:
        - '--args=--lockfile=false'
